<ng-container *ngIf="optionBindings?.length; else noOptions">
  <form [formGroup]="form">
    <div *ngFor="let b of optionBindings; let i = index; trackBy: trackByOption">

      <!-- FLEX-ROW that gets coloured by the directive -->
      <label class="option-row"               <!-- NEW -->
             appHighlightOption
             [optionBinding]="b">

        <!-- INPUT ----------------------------------------------------------- -->
        <ng-container [ngSwitch]="b.type">

          <!-- single choice -->
          <mat-radio-button *ngSwitchCase="'single'"
                            [value]="b.option.optionId"
                            (pointerdown)="handleRadio(b,i)">
          </mat-radio-button>

          <!-- multiple choice -->
          <mat-checkbox     *ngSwitchCase="'multiple'"
                            [checked]="b.option.selected"
                            (change)="onMatCheckboxChanged(b,i,$event)">
          </mat-checkbox>

        </ng-container>

        <!-- TEXT ------------------------------------------------------------ -->
        <span class="opt-text">
          {{ getOptionDisplayText(b.option,i) }}
        </span>

        <!--  ICON (sits on the same row) ------------------------------------ -->
        <mat-icon *ngIf="shouldShowIcon(b.option)"
                  class="opt-icon">
          {{ getOptionIcon(b.option) }}
        </mat-icon>
      </label>

      <!-- FEEDBACK (under the coloured row) --------------------------------- -->
      <codelab-quiz-feedback
        *ngIf="shouldShowFeedback(i)"
        [feedbackConfig]="feedbackConfigs[i]">
      </codelab-quiz-feedback>
    </div>
  </form>
</ng-container>

<ng-template #noOptions><p>No options available.</p></ng-template>
