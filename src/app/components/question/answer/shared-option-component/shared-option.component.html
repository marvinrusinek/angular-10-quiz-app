<ng-container *ngIf="canDisplayOptions; else noOptions">
  <form [formGroup]="form">
    <ng-container [ngSwitch]="optionBindings[0]?.type">

      <!-- Single-answer -->
      <mat-radio-group *ngSwitchCase="'single'" formControlName="selectedOptionId">
        <div *ngFor="let optionBinding of optionBindings; let idx = index; trackBy: trackByOption">
          <label class="options">
            <mat-radio-button
              appHighlightOption
              [optionBinding]="optionBinding"
              [value]="optionBinding.option.optionId"
              (change)="onMatRadioChanged(optionBinding, idx, $event)">
              <ng-container *ngTemplateOutlet="optionContent; context: getOptionContext(optionBinding, idx)">
              </ng-container>
            </mat-radio-button>

            <codelab-quiz-feedback
              *ngIf="shouldShowFeedback(idx)"
              [feedbackConfig]="feedbackConfigs[idx]">
            </codelab-quiz-feedback>
          </label>
        </div>
      </mat-radio-group>

      <!-- Multiple-answer -->
      <div *ngSwitchCase="'multiple'">
        <div *ngFor="let optionBinding of optionBindings; let idx = index; trackBy: trackByOption">
          <label class="options">
            <mat-checkbox
              appHighlightOption
              [optionBinding]="optionBinding"
              [value]="optionBinding.option.optionId"
              (change)="onMatCheckboxChanged(optionBinding, idx, $event)">
              <ng-container *ngTemplateOutlet="optionContent; context: getOptionContext(optionBinding, idx)">
              </ng-container>
            </mat-checkbox>

            <codelab-quiz-feedback
              *ngIf="shouldShowFeedback(idx)"
              [feedbackConfig]="feedbackConfigs[idx]">
            </codelab-quiz-feedback>
          </label>
        </div>
      </div>
    </ng-container>
  </form>
</ng-container>

<!-- Template for option content -->
<ng-template #optionContent let-option="option" let-idx="idx">
  <div class="option-content">
    <span class="option-text" [ngStyle]="optionTextStyle">
      {{ getOptionDisplayText(option, idx) }}
    </span>
    <mat-icon *ngIf="shouldShowIcon(option)" [ngClass]="optionIconClass">
      {{ getOptionIcon(option) }}
    </mat-icon>
  </div>
</ng-template>

<ng-template #noOptions>
  <p>No options available.</p>
</ng-template>
