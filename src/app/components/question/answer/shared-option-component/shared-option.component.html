<ng-container *ngIf="optionBindings?.length; else noOptions">
  <form [formGroup]="form">

    <div *ngFor="let b of optionBindings; let i = index; trackBy: trackByOption"
         class="option-row options">

      <ng-container [ngSwitch]="b.type">

        <!-- SINGLE answer -->
        <mat-radio-group
          formControlName="selectedOptionId"
          (selectionChange)="onGroupSelectionChange($event.value)">
          <mat-radio-button
            *ngSwitchCase="'single'"
            formControlName="selectedOptionId"
            [value]="b.option.optionId"
            appHighlightOption
            [optionBinding]="b"
            (click)="onRadioClick(b, i)">

            <span class="opt-text">{{ getOptionDisplayText(b.option, i) }}</span>
            <mat-icon *ngIf="shouldShowIcon(b.option)" class="opt-icon">
              {{ getOptionIcon(b.option) }}
            </mat-icon>
          </mat-radio-button>
        </mat-radio-group>

        <!-- MULTIPLE answer -->
        <mat-checkbox
          *ngSwitchCase="'multiple'"
          [checked]="b.option.selected"
          (change)="onMatCheckboxChanged(b,i,$event)"
          appHighlightOption
          [optionBinding]="b">

          <span class="opt-text">{{ getOptionDisplayText(b.option, i) }}</span>
          <mat-icon *ngIf="shouldShowIcon(b.option)" class="opt-icon">
            {{ getOptionIcon(b.option) }}
          </mat-icon>
        </mat-checkbox>

      </ng-container>

      <!-- exactly one feedback block per option row -->
      <codelab-quiz-feedback
        *ngIf="shouldShowFeedback(i)"
        [feedbackConfig]="feedbackConfigs[i]">
      </codelab-quiz-feedback>

    </div>

  </form>
</ng-container>

<ng-template #noOptions><p>No options available.</p></ng-template>
