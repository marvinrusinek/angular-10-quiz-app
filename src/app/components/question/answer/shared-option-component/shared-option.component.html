<ng-container 
  *ngIf="renderReady && canDisplayOptions && optionsToDisplay?.length > 0; else noOptions"
  [style.visibility]="finalRenderReady ? 'visible' : 'hidden'"
  [style.minHeight]="'1rem'">

  <p>[üîç Option Type Check]: {{ type }}</p>

  <form [formGroup]="form" class="options-form">

    <!-- SINGLE-ANSWER (radio) -->
    <mat-radio-group
      *ngIf="type === 'single'" 
      class="options-group options single-option"
      formControlName="selectedOptionId"
      (selectionChange)="updateOptionAndUI($event)">

      <mat-radio-button 
        *ngFor="let b of optionBindings; let i = index; trackBy: trackByOptionId"
        appHighlightOption
        [value]="b.option.optionId"
        name="selectedOptionId"
        (click)="handleClick(b, i)"
        (change)="handleChange(b, i)"
      >

        <span class="option-text">
          {{ getOptionDisplayText(b.option, i) }}
        </span>

        <mat-icon *ngIf="shouldShowIcon(b.option)" class="opt-icon">
          {{ getOptionIcon(b.option) }}
        </mat-icon>
      </mat-radio-button>
    </mat-radio-group>

    <!-- MULTIPLE-ANSWER (checkbox) -->
    <div *ngIf="type === 'multiple'" class="options-group options multiple-option">
      <div
        *ngFor="let b of optionBindings; let i = index; trackBy: trackByOptionId"
        class="option-row">

        <label class="option-row options"
               appHighlightOption
               [optionBinding]="b"
               [isCorrect]="b.isCorrect">

          <mat-checkbox
            [checked]="b.option.selected"
            [value]="b.option.optionId"
            (change)="updateOptionAndUI($event)"
            (click)="console.log('[üñ±Ô∏è Checkbox Click]:', b.option.optionId)">

            <span class="option-text">
              {{ getOptionDisplayText(b.option, i) }}
            </span>

            <mat-icon *ngIf="shouldShowIcon(b.option)" class="opt-icon">
              {{ getOptionIcon(b.option) }}
            </mat-icon>
          </mat-checkbox>
        </label>

        <codelab-quiz-feedback
          *ngIf="shouldShowFeedback(i)"
          [feedbackConfig]="feedbackConfigs[i]">
        </codelab-quiz-feedback>
      </div>
    </div>
  </form>
</ng-container>

<ng-template #noOptions>
  <span style="min-height: 1rem;">Options not ready...</span>
</ng-template>
