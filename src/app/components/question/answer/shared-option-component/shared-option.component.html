<ng-container *ngIf="canDisplayOptions; else noOptions">
  <form [formGroup]="form">

    <div *ngFor="let b of optionBindings; let i = index; trackBy: trackByOption">
      <label class="options">

        <ng-container [ngSwitch]="b.type">

          <!-- SINGLE-ANSWER -->
          <mat-radio-button
            *ngSwitchCase="'single'"
            [checked]="b.option.selected"
            (click)="onRadioClick(b, i)"
            appHighlightOption
            [optionBinding]="b"
          >
            <div class="option-content">
              <span class="option-text">
                {{ getOptionDisplayText(b.option, i) }}
              </span>
              <mat-icon
                *ngIf="shouldShowIcon(b.option)"
                class="option-icon"
              >
                {{ getOptionIcon(b.option) }}
              </mat-icon>
            </div>
          </mat-radio-button>

          <!-- MULTIPLE-ANSWER -->
          <mat-checkbox
            *ngSwitchCase="'multiple'"
            [checked]="b.option.selected"
            (change)="onMatCheckboxChanged(b, i, $event)"
            appHighlightOption
            [optionBinding]="b"
          >
            <div class="option-content">
              <span class="option-text">
                {{ getOptionDisplayText(b.option, i) }}
              </span>
              <mat-icon
                *ngIf="shouldShowIcon(b.option)"
                class="option-icon"
              >
                {{ getOptionIcon(b.option) }}
              </mat-icon>
            </div>
          </mat-checkbox>

        </ng-container>

        <!-- ONE feedback block per option -->
        <codelab-quiz-feedback
          *ngIf="shouldShowFeedback(i)"
          [feedbackConfig]="feedbackConfigs[i]"
        ></codelab-quiz-feedback>

      </label>
    </div>

  </form>
</ng-container>

<ng-template #noOptions>
  <p>No options available.</p>
</ng-template>
